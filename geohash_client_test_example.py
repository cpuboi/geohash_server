#!/usr/bin/env python3
import geohash_client
import random
import json


def test1():
    gc = geohash_client.GeohashClient()
    testlist = """42.536457:-70.985786
42.328674:-72.664658
42.341042:-71.217133
42.810356:-70.893875
41.638409:-70.941208
42.419331:-71.119720
42.429752:-71.071022
42.525482:-71.764183
42.701283:-71.175682
42.203217:-72.625481
42.587334:-72.603416
42.280418:-71.423233
42.586716:-71.814468
42.408623:-71.056999
42.392925:-71.037109
42.856842:-70.963440
38.981544:-77.010674
38.363350:-75.605919
39.086437:-77.161263
39.644207:-77.731430
38.998318:-76.896332
39.649109:-78.769714
38.563461:-76.085251
39.514877:-76.174110
46.680672:-68.023521
43.680031:-70.310425
44.101902:-70.217110
44.230553:-69.779633
44.906910:-66.996201
45.188042:-67.282753
43.489849:-70.469711
44.424770:-69.010620
43.917503:-69.829712
44.331493:-69.788994
44.090008:-70.271439
29.795111:-90.828140
30.124033:-91.833435
29.706043:-91.206917
32.509930:-92.121742
29.916653:-90.057854
32.778889:-91.919243
31.284788:-92.471176
37.746880:-84.301460
38.206348:-84.270172
37.760586:-87.127686
39.088970:-84.500786
36.616894:-83.739494
36.739876:-88.646523
37.569702:-85.743095
37.250626:-83.195503
37.766270:-84.852119
36.843681:-83.324593
38.192902:-84.883942
37.703224:-85.871674
39.067719:-84.516426
37.344158:-85.346436
36.976524:-86.456017
37.569199:-84.299782
37.820415:-85.467949
36.869038:-83.892479
38.460304:-82.649666
39.779823:-98.787064
38.826633:-97.616257
37.406769:-94.705528
38.604465:-95.271301
38.497746:-94.960602
38.047016:-97.350304
39.313015:-94.941147
38.960213:-95.277390
39.026646:-96.852814
38.885090:-99.326202
38.364895:-98.774300
37.838108:-94.710022
38.405903:-96.188339
37.753098:-100.024872
38.661697:-96.492599
37.679878:-95.459778
39.563606:-95.125549
41.579830:-93.791328
42.464397:-93.829056
42.499504:-92.358665
42.495132:-96.400070
41.016621:-92.430550
41.299023:-92.653198
41.703957:-93.054817
40.969242:-91.555420
40.407204:-91.410805
41.746952:-92.729362
42.512745:-94.188148
43.403500:-94.843323
42.516033:-90.718506
41.250854:-95.882042
41.827965:-90.249619
42.754681:-95.557831
43.066807:-92.683464
40.810947:-91.131844
42.060650:-93.885490
40.800262:-85.830887
38.678299:-87.522491
41.483845:-87.063965"""
    for line in testlist.split():
        try:
            lat = line.split(":")[0]
            lon = line.split(":")[1].rstrip()
            data = gc.query_lat_lon(lat,lon)

            print(data)
        except Exception as e:
            print(f"Error: {e}")


def test2(limit=100_000):
    """
    Randomly generate lat lon
    lat = -90 to 90
    lon = 0 to 180
    """
    gc = geohash_client.GeohashClient()
    count = 0
    hit_count = 1
    for i in range(0, limit):
        count +1
        lat = random.uniform(-90, 90)
        lon = random.uniform(0, 180)
        data = json.loads(gc.query_lat_lon(lat, lon))
        if data["city"] != None:
            print(data)


    print(count, hit_count)

test1()

test2()


